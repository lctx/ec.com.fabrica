CREATE USER FABRICA IDENTIFIED BY FABRICA;
GRANT CONNECT, RESOURCE, UNLIMITED TABLESPACE TO FABRICA;


CREATE TABLE EMPLEADO
(
CED_EMP VARCHAR(10) PRIMARY KEY,
NOM1_EMP VARCHAR(10) NOT NULL,
NOM2_EMP VARCHAR(10),
APE1_EMP VARCHAR(15) NOT NULL,
APE2_EMP VARCHAR(15),
TIP_SAN_EMP VARCHAR(3) NOT NULL,
GEN_EMP VARCHAR(1) NOT NULL,
FEC_NAC_EMP DATE NOT NULL,
NAC_EMP VARCHAR(15) NOT NULL,
PRO_EMP INTEGER NOT NULL REFERENCES PROVINCIA(COD_PRO),
DIR_EMP VARCHAR(30) NOT NULL,
CEL_EMP VARCHAR(10) NOT NULL,
TEL_EMP VARCHAR(10),
TIT_EMP VARCHAR(20) NOT NULL,
SUE_NOM NUMBER NOT NULL,
CAR_EMP VARCHAR(20) NOT NULL,
CLA_EMP VARCHAR(10) NOT NULL
);

CREATE TABLE ASISTENCIA
(
COD_ASI INTEGER PRIMARY KEY,
CED_EMP_ASI VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
FEC_ASI DATE NOT NULL,
HOR_ENT VARCHAR(8) NOT NULL,
HOR_SAL VARCHAR(8) NOT NULL
);

CREATE TABLE SANCION
(
COD_SAN INTEGER PRIMARY KEY,
CED_EMP_SAN VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
TIP_SAN VARCHAR(9) NOT NULL,
VAL_SAN NUMBER NOT NULL,
DET_SAN VARCHAR(30) NOT NULL
);

CREATE TABLE PERMISO
(
COD_PER INTEGER PRIMARY KEY,
CED_EMP_PER VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
FEC_PER DATE NOT NULL,
CAN_HOR_PER INTEGER NOT NULL
);

CREATE TABLE HORA_EXTRA
(
COD_HEX INTEGER PRIMARY KEY,
CED_EMP_HEX VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
CAN_HEX INTEGER NOT NULL
);

CREATE TABLE ADELANTO
(
COD_ADE INTEGER PRIMARY KEY,
CED_EMP_ADE VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
VAL_ADE NUMBER NOT NULL,
DET_ADE VARCHAR(20) NOT NULL
);

CREATE TABLE PROVINCIA
(
COD_PRO INTEGER PRIMARY KEY,
NOM_PRO VARCHAR(20) NOT NULL,
CAP_PRO VARCHAR(30) NOT NULL
);

CREATE TABLE ROL_PAGO
(
COD_ROL INTEGER PRIMARY KEY,
CED_EMP_ROL VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
SUE_NOM NUMBER NOT NULL,
SUE_HEX NUMBER,
APO_IES NUMBER NOT NULL,
TOT_ADE NUMBER,
TOT_SAN NUMBER,
TOT_ING NUMBER NOT NULL,
TOT_EGR NUMBER NOT NULL,
TOT_ROL NUMBER NOT NULL
);


CREATE TABLE COMPRADOR
(
COD_COM VARCHAR(6) PRIMARY KEY,
RUC_COM VARCHAR(13) NOT NULL,
NOM_COM VARCHAR(30) NOT NULL,
DIR_COM VARCHAR(30) NOT NULL,
TEL_COM VARCHAR(10) NOT NULL,
EMA_COM VARCHAR(20)
);

CREATE TABLE CATEGORIA
(
COD_CAT VARCHAR(8) PRIMARY KEY,
NOM_CAT VARCHAR(15) NOT NULL,
DES_CAT VARCHAR(25)
);

CREATE TABLE PRODUCTO
(
COD_PRO VARCHAR(10) PRIMARY KEY,
NOM_PRO VARCHAR(20) NOT NULL,
DES_PRO VARCHAR(20) NOT NULL,
PVP_PRO NUMBER NOT NULL,
STK_PRO INTEGER NOT NULL,
CAT_PRO VARCHAR(8) NOT NULL REFERENCES CATEGORIA(COD_CAT)
);

CREATE TABLE FACTURA_SALIDA
(
NUM_FAC_S INTEGER PRIMARY KEY,
FEC_FAC_S DATE,
COD_COM_FAC VARCHAR(6) NOT NULL REFERENCES COMPRADOR(COD_COM),
CED_EMP_FAC_S VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
TOT_FAC_S NUMBER NOT NULL
);

CREATE TABLE DETALLE_FAC_SA
(
NUM_FAC_S INTEGER NOT NULL REFERENCES FACTURA_SALIDA(NUM_FAC_S),
COD_PRO_DET VARCHAR(10) NOT NULL REFERENCES PRODUCTO(COD_PRO),
CAN_PRO_DET INTEGER NOT NULL
);

CREATE TABLE PROVEEDOR
(
COD_PROV VARCHAR(5) PRIMARY KEY,
NOM_PROV VARCHAR(30) NOT NULL,
DIR_PROV VARCHAR(30) NOT NULL,
TEL_PROV VARCHAR(10) NOT NULL,
EMA_PROV VARCHAR(20)
);

CREATE TABLE MATERIA_PRIMA
(
COD_MAT_PRI VARCHAR(10) PRIMARY KEY,
NOM_MAT_PRI VARCHAR(20) NOT NULL,
DES_MAT_PRI VARCHAR(20) NOT NULL,
PVP_MAT_PRI NUMBER NOT NULL
);

CREATE TABLE FACTURA_ENTRADA
(
NUM_FAC_E INTEGER PRIMARY KEY,
FEC_FAC_E DATE,
COD_PROV_FAC VARCHAR(5) NOT NULL REFERENCES PROVEEDOR(COD_PROV),
COD_EMP_FAC_E VARCHAR(10) NOT NULL REFERENCES EMPLEADO(CED_EMP),
TOT_FAC_E NUMBER NOT NULL
);

CREATE TABLE DETALLE_FAC_EN
(
NUM_FAC_E INTEGER NOT NULL REFERENCES FACTURA_ENTRADA(NUM_FAC_E),
COD_MAT_DET VARCHAR(10) NOT NULL REFERENCES MATERIA_PRIMA(COD_MAT_PRI),
CANT_MAT_DET INTEGER NOT NULL
);



********************************************************************************
INSERT INTO PROVINCIA VALUES (1, 'AZUAY', 'CUENCA');
INSERT INTO PROVINCIA VALUES (2, 'BOLIVAR', 'GUARANDA');
INSERT INTO PROVINCIA VALUES (3, 'CAÑAR', 'ASOGUEZ');
INSERT INTO PROVINCIA VALUES (4, 'CARCHI', 'TULCAN');
INSERT INTO PROVINCIA VALUES (5, 'COTOPAXI', 'LATACUNGA');
INSERT INTO PROVINCIA VALUES (6, 'CHIMBORAZO', 'RIOBAMBA');
INSERT INTO PROVINCIA VALUES (7, 'EL ORO', 'MACHALA');
INSERT INTO PROVINCIA VALUES (8, 'ESMERALDAS', 'ESMERALDAS');
INSERT INTO PROVINCIA VALUES (9, 'GUAYAS', 'GUAYAQUIL');
INSERT INTO PROVINCIA VALUES (10, 'IMBABURA', 'IBARRA');
INSERT INTO PROVINCIA VALUES (11, 'LOJA', 'LOJA');
INSERT INTO PROVINCIA VALUES (12, 'LOS RIOS', 'BABAHOYO');
INSERT INTO PROVINCIA VALUES (13, 'MANABI', 'PORTO VIEJO');
INSERT INTO PROVINCIA VALUES (14, 'MORONA SANTIAGO', 'MACAS');
INSERT INTO PROVINCIA VALUES (15, 'NAPO', 'TENA');
INSERT INTO PROVINCIA VALUES (16, 'PASTAZA', 'PUYO');
INSERT INTO PROVINCIA VALUES (17, 'PICHINCHA', 'QUITO');
INSERT INTO PROVINCIA VALUES (18, 'TUNGURAHUA', 'AMBATO');
INSERT INTO PROVINCIA VALUES (19, 'ZAMORA CHINCHIPE', 'ZAMORA');
INSERT INTO PROVINCIA VALUES (20, 'GALAPAGOS', 'PTO BAQUERIZO');
INSERT INTO PROVINCIA VALUES (21, 'SUCUMBIOS', 'NUEVA LOJA');
INSERT INTO PROVINCIA VALUES (22, 'ORELLANA', 'FCO ORELLANA');
INSERT INTO PROVINCIA VALUES (23, 'STO DOMINGO', 'STO DOMINGO CDS');
INSERT INTO PROVINCIA VALUES (24, 'STA ELENA', 'STA ELENA');















